---
import { navigateES } from "@content/navigation.js";
---

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('selectedSection', () => ({
            init(){
                this.updateList()
            },
            updateList() {
                const titles = [...document.querySelectorAll('h2')].sort((a, b) => {
                return Math.abs(a.getBoundingClientRect().top) - Math.abs(b.getBoundingClientRect().top);
                });
                let id = [...document.querySelectorAll('h2')].indexOf(titles[0]);
                document.querySelectorAll(".selected-option").forEach(c => c.classList.remove("selected-option"));
                document.querySelectorAll(".nav-option")[id].classList.add("selected-option");
            }
        }))
    })
</script>

<div x-data="selectedSection" x-on:scroll.window.throttle.25ms="updateList" class="hidden md:flex space-x-6 items-center">
    {navigateES.map((item: any) => (
        <a href={item.href} class="nav-option hover:transition-all text-sm lg:text-base hover:text-highlight hover:border-b-2 hover:border-b-highlight">{item.text}</a>
      ))}
</div>

<style>
    .selected-option{
			border-bottom-width: 2px;
			--tw-border-opacity: 1;
			border-color: rgb(237 91 45 / var(--tw-border-opacity));
			--tw-text-opacity: 1;
			color: rgb(237 91 45 / var(--tw-text-opacity));
		}
</style>